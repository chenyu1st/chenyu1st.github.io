<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>深入浅出Docker原理及实战(二)——Docker的安装及常用命令 | 宇神之息</title><meta name="description" content="深入浅出Docker原理及实战"><meta name="keywords" content="Docker,Devops,Linux,容器"><meta name="author" content="Rugod"><meta name="copyright" content="Rugod"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="crossorigin"/><link rel="preconnect" href="https://hm.baidu.com"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="深入浅出Docker原理及实战(二)——Docker的安装及常用命令"><meta name="twitter:description" content="深入浅出Docker原理及实战"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/docker.jpg"><meta property="og:type" content="article"><meta property="og:title" content="深入浅出Docker原理及实战(二)——Docker的安装及常用命令"><meta property="og:url" content="https://rugod.com/2020/06/09/docker/docker-idea-2/"><meta property="og:site_name" content="宇神之息"><meta property="og:description" content="深入浅出Docker原理及实战"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/docker.jpg"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://rugod.com/2020/06/09/docker/docker-idea-2/"><link rel="prev" title="Kubernetes可视化界面及监控安装" href="https://rugod.com/2020/06/17/kubernetes/Kubernetes-dashboard/"><link rel="next" title="跟我学Mysql之事务篇" href="https://rugod.com/2020/06/08/mysql/mysql-trx/"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?a29fc1f2b32c6a60aee5dbf412c89285";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-164950732-1', 'auto');
ga('send', 'pageview');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://www.rugod.cn/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: Rugod","link":"链接: ","source":"来源: 宇神之息","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: {"text":"宇神,牛逼","fontSize":"15px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/Challenger.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">71</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">78</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">22</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于本人</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#安装docker"><span class="toc-number">1.</span> <span class="toc-text">安装docker</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#操作系统要求"><span class="toc-number">1.1.</span> <span class="toc-text">操作系统要求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#卸载旧版本"><span class="toc-number">1.2.</span> <span class="toc-text">卸载旧版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装"><span class="toc-number">1.3.</span> <span class="toc-text">安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#yum安装"><span class="toc-number">1.3.1.</span> <span class="toc-text">yum安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#设置yum源"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">设置yum源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装DOCKER引擎"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">安装DOCKER引擎</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置docker源"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">配置docker源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#启动"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">启动</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rpm安装"><span class="toc-number">1.3.2.</span> <span class="toc-text">rpm安装</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker常用命令-CLI"><span class="toc-number">2.</span> <span class="toc-text">docker常用命令(CLI)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Registry"><span class="toc-number">2.1.</span> <span class="toc-text">Registry</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#login"><span class="toc-number">2.1.1.</span> <span class="toc-text">login</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#logout"><span class="toc-number">2.1.2.</span> <span class="toc-text">logout</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Images"><span class="toc-number">2.2.</span> <span class="toc-text">Images</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#pull"><span class="toc-number">2.2.1.</span> <span class="toc-text">pull</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tag"><span class="toc-number">2.2.2.</span> <span class="toc-text">tag</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#push"><span class="toc-number">2.2.3.</span> <span class="toc-text">push</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rmi"><span class="toc-number">2.2.4.</span> <span class="toc-text">rmi</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Container"><span class="toc-number">2.3.</span> <span class="toc-text">Container</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#run"><span class="toc-number">2.3.1.</span> <span class="toc-text">run</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cp"><span class="toc-number">2.3.2.</span> <span class="toc-text">cp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exec"><span class="toc-number">2.3.3.</span> <span class="toc-text">exec</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#log"><span class="toc-number">2.3.4.</span> <span class="toc-text">log</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rm"><span class="toc-number">2.3.5.</span> <span class="toc-text">rm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#diff"><span class="toc-number">2.3.6.</span> <span class="toc-text">diff</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#stop"><span class="toc-number">2.3.7.</span> <span class="toc-text">stop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#start"><span class="toc-number">2.3.8.</span> <span class="toc-text">start</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他"><span class="toc-number">2.4.</span> <span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#volume"><span class="toc-number">2.4.1.</span> <span class="toc-text">volume</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ps"><span class="toc-number">2.4.2.</span> <span class="toc-text">ps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#images"><span class="toc-number">2.4.3.</span> <span class="toc-text">images</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#system"><span class="toc-number">2.4.4.</span> <span class="toc-text">system</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#inspect"><span class="toc-number">2.4.5.</span> <span class="toc-text">inspect</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#总结"><span class="toc-number">3.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考文献"><span class="toc-number">4.</span> <span class="toc-text">参考文献</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/docker.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">宇神之息</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于本人</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">深入浅出Docker原理及实战(二)——Docker的安装及常用命令</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-06-09 17:57:53"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-06-09</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-10-31 15:38:55"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-10-31</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Docker/">Docker</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">5.7k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 24 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2020/06/09/docker/docker-idea-2/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/06/09/docker/docker-idea-2/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><p>声明:这是我在大学毕业后进入第一家互联网公司学习的内容</p>
<hr>
<p>深入浅出Docker原理及实战系列第二篇，遵循先运用后理解的思想，我主要讲解docker的安装过程及常用命令，可以帮助大家快速上手docker(你先用起来，再去理解原理)。</p>
<h1 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h1><h2 id="操作系统要求"><a href="#操作系统要求" class="headerlink" title="操作系统要求"></a>操作系统要求</h2><p>要安装Docker Engine，需要CentOS 7的稳定版本。</p>
<p>当前稳定版本：CentOS Linux release 7.6.1810 (Core)</p>
<p>建议使用overlay2存储驱动程序。</p>
<h2 id="卸载旧版本"><a href="#卸载旧版本" class="headerlink" title="卸载旧版本"></a>卸载旧版本</h2><p>较旧的Docker版本称为docker或docker-engine。如果已安装这些程序，请卸载它们以及相关的依赖项。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@dev-master-01 ~]#yum remove docker \</span><br><span class="line">                        docker-client \</span><br><span class="line">                        docker-client-latest \</span><br><span class="line">                        docker-common \</span><br><span class="line">                        docker-latest \</span><br><span class="line">                        docker-latest-logrotate \</span><br><span class="line">                        docker-logrotate \</span><br><span class="line">                        docker-engine</span><br></pre></td></tr></table></figure>

<p>如果yum报告没有安装这些软件包，那就可以了。</p>
<p>/var/lib/docker/的内容（包括镜像，容器，卷和网络）被保留。 Docker Engine软件包现在称为docker-ce。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>您可以根据需要以不同的方式安装Docker Engine：</p>
<ul>
<li>大多数用户会设置Docker的存储库并从中进行安装，以简化安装和升级任务。这是推荐的方法。</li>
<li>一些用户下载并手动安装RPM软件包，并完全手动管理升级。这在诸如在无法访问互联网的空白系统上安装Docker的情况下非常有用。</li>
</ul>
<h3 id="yum安装"><a href="#yum安装" class="headerlink" title="yum安装"></a>yum安装</h3><h4 id="设置yum源"><a href="#设置yum源" class="headerlink" title="设置yum源"></a>设置yum源</h4><p>安装yum-utils软件包（提供yum-config-manager实用程序）并设置稳定的存储库。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ yum install -y yum-utils</span><br><span class="line"></span><br><span class="line">$ yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo</span><br></pre></td></tr></table></figure>

<h4 id="安装DOCKER引擎"><a href="#安装DOCKER引擎" class="headerlink" title="安装DOCKER引擎"></a>安装DOCKER引擎</h4><p>安装最新版本的Docker Engine和容器：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install -y docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>

<p>要安装特定版本的Docker Engine，请在存储库中列出可用版本，然后选择并安装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ yum list docker-ce --showduplicates | sort -r</span><br><span class="line"></span><br><span class="line">docker-ce.x86_64  3:18.09.1-3.el7                     docker-ce-stable</span><br><span class="line">docker-ce.x86_64  3:18.09.0-3.el7                     docker-ce-stable</span><br><span class="line">docker-ce.x86_64  18.06.1.ce-3.el7                    docker-ce-stable</span><br><span class="line">docker-ce.x86_64  18.06.0.ce-3.el7                    docker-ce-stable</span><br></pre></td></tr></table></figure>

<p>通过完全限定的软件包名称安装特定版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io    </span><br><span class="line"></span><br><span class="line">例如：docker-ce-18.09.1</span><br></pre></td></tr></table></figure>
<h4 id="配置docker源"><a href="#配置docker源" class="headerlink" title="配置docker源"></a>配置docker源</h4><p>一般拉取镜像都是从docker hub拉取，速度较慢，切换成阿里源镜像会快很多</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim   &#x2F;etc&#x2F;docker&#x2F;daemon.json</span><br><span class="line">添加</span><br><span class="line">	&#123;</span><br><span class="line">  		&quot;registry-mirrors&quot;: [&quot;https:&#x2F;&#x2F;wghlmi3i.mirror.aliyuncs.com&quot;]</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><p>systemctl start docker</p>
<p>验证</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@dev-master-01 datarouter]# docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           19.03.4</span><br><span class="line"> API version:       1.40</span><br><span class="line"> Go version:        go1.12.10</span><br><span class="line"> Git commit:        9013bf583a</span><br><span class="line"> Built:             Fri Oct 18 15:52:22 2019</span><br><span class="line"> OS&#x2F;Arch:           linux&#x2F;amd64</span><br><span class="line"> Experimental:      false</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          19.03.4</span><br><span class="line">  API version:      1.40 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.12.10</span><br><span class="line">  Git commit:       9013bf583a</span><br><span class="line">  Built:            Fri Oct 18 15:50:54 2019</span><br><span class="line">  OS&#x2F;Arch:          linux&#x2F;amd64</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.2.10</span><br><span class="line">  GitCommit:        b34a5c8af56e510852c35414db4c1f4fa6172339</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.0-rc8+dev</span><br><span class="line">  GitCommit:        3e425f80a8c931f88e6d94a8c831b9d5aa481657</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.18.0</span><br><span class="line">  GitCommit:        fec3683</span><br></pre></td></tr></table></figure>

<h3 id="rpm安装"><a href="#rpm安装" class="headerlink" title="rpm安装"></a>rpm安装</h3><p>如果无法使用Docker的存储库安装Docker，则可以下载该.rpm发行版的 文件并手动安装。每次要升级Docker Engine时，都需要下载一个新文件。</p>
<ul>
<li>转到<a href="https://download.docker.com/linux/centos/" target="_blank" rel="noopener">https://download.docker.com/linux/centos/</a> 并选择您的CentOS版本。然后浏览x86_64/stable/Packages/ 并下载.rpm您要安装的Docker版本的文件。</li>
<li>安装Docker Engine，将下面的路径更改为您下载Docker软件包的路径。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install &#x2F;path&#x2F;to&#x2F;package.rpm</span><br></pre></td></tr></table></figure></li>
<li>启动Docker<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="docker常用命令-CLI"><a href="#docker常用命令-CLI" class="headerlink" title="docker常用命令(CLI)"></a>docker常用命令(CLI)</h1><p>下面从仓库、镜像、容器、其他方面来讲述docker的常用命令。</p>
<h2 id="Registry"><a href="#Registry" class="headerlink" title="Registry"></a>Registry</h2><p>关于仓库最主要的几个命令有login logout</p>
<h3 id="login"><a href="#login" class="headerlink" title="login"></a>login</h3><ul>
<li>作用：登录Docker仓库</li>
<li>用法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login [OPTIONS] [SERVER]</span><br></pre></td></tr></table></figure>


</li>
</ul>
<table>
<thead>
<tr>
<th>OPTIONS</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>–password , -p</td>
<td>密码</td>
</tr>
<tr>
<td>–username , -u</td>
<td>用户名</td>
</tr>
</tbody></table>
<ul>
<li>eg: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login -u admin -p Harbor12345  development.docker.cn:5000</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="logout"><a href="#logout" class="headerlink" title="logout"></a>logout</h3><ul>
<li><p>作用：从Docker仓库注销</p>
</li>
<li><p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logout [SERVER]</span><br></pre></td></tr></table></figure>
</li>
<li><p>eg: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logout  development.docker.cn:5000</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h2><p>关于镜像最主要的几个命令有pull、push、tag、rmi</p>
<h3 id="pull"><a href="#pull" class="headerlink" title="pull"></a>pull</h3><ul>
<li>作用：从镜像仓库中拉取镜像</li>
<li>用法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull [OPTIONS] NAME[:TAG]</span><br></pre></td></tr></table></figure>

</li>
</ul>
<table>
<thead>
<tr>
<th>OPTIONS</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>–all-tags , -a</td>
<td>下载存储库中所有标记的镜像</td>
</tr>
<tr>
<td>–quiet , -q</td>
<td>禁止详细输出</td>
</tr>
</tbody></table>
<ul>
<li>eg：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu:14.04</span><br></pre></td></tr></table></figure>


</li>
</ul>
<p>大多数镜像都将在Docker Hub的基础镜像之上创建。也可以手动指定要从中提取镜像仓库的路径。例如，如果已经设置了本地仓库，则可以指定从中提取的路径。</p>
<ul>
<li>eg：本地的harbor仓库url为development.docker.cn:5000，要从harbor仓库里拉取镜像前必须先登陆</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker login -u admin -p Harbor12345  development.docker.cn:5000</span><br><span class="line">docker pull development.docker.cn:5000&#x2F;test&#x2F;nginx:0.0.1</span><br></pre></td></tr></table></figure>
<h3 id="tag"><a href="#tag" class="headerlink" title="tag"></a>tag</h3><ul>
<li><p>作用：创建一个引用了SOURCE_IMAGE的标签TARGET_IMAGE</p>
</li>
<li><p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</span><br></pre></td></tr></table></figure>
</li>
<li><p>扩展说明:镜像名称由斜杠分隔的名称组成，可以选择以镜像仓库的主机名作为前缀。主机名必须符合标准DNS规则，但不得包含下划线。标签名称必须是有效的ASCII，并且可以包含小写和大写字母，数字，下划线，句点和破折号。标签名称不能以句点或破折号开头，并且最多可以包含128个字符。</p>
</li>
<li><p>eg：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker tag development.docker.cn:5000&#x2F;test&#x2F;nginx:0.0.1  test.docker.cn:5000&#x2F;test&#x2F;nginx:0.0.1</span><br><span class="line">[root@localhost ~]# docker images -a</span><br><span class="line">REPOSITORY                                                          TAG                        IMAGE ID            CREATED             SIZE</span><br><span class="line">development.docker.cn:5000&#x2F;test&#x2F;nginx                               0.0.1                    730908c6f40c        6 days ago          1.38GB</span><br><span class="line">test.docker.cn:5000&#x2F;test&#x2F;nginx                                      0.0.1                    730908c6f40c        6 days ago          1.38GB</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="push"><a href="#push" class="headerlink" title="push"></a>push</h3><ul>
<li><p>作用：将镜像推送到镜像仓库</p>
</li>
<li><p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push  NAME[:TAG]</span><br></pre></td></tr></table></figure>
</li>
<li><p>eg：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push test.docker.cn:5000&#x2F;test&#x2F;nginx:0.0.1</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="rmi"><a href="#rmi" class="headerlink" title="rmi"></a>rmi</h3><ul>
<li>作用：删除一个或多个镜像</li>
<li>用法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi [OPTIONS] IMAGE [IMAGE...]</span><br></pre></td></tr></table></figure>


<table>
<thead>
<tr>
<th>OPTIONS</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>–force , -f</td>
<td>强制删除</td>
</tr>
<tr>
<td>–no-prune</td>
<td>不要删除未加标签的镜像</td>
</tr>
</tbody></table>
<ul>
<li>eg：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi development.docker.cn:5000&#x2F;test&#x2F;nginx:0.0.1</span><br></pre></td></tr></table></figure>

<p>如果使用-f标志并指定图像的短ID或长ID，则此命令将取消标记并删除所有与指定ID匹配的图像。</p>
<ul>
<li>eg：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ docker images -a</span><br><span class="line"></span><br><span class="line">REPOSITORY                TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">test1                     latest              fd484f19954f        23 seconds ago      7 B (virtual 4.964 MB)</span><br><span class="line">test                      latest              fd484f19954f        23 seconds ago      7 B (virtual 4.964 MB)</span><br><span class="line">test2                     latest              fd484f19954f        23 seconds ago      7 B (virtual 4.964 MB)</span><br><span class="line"></span><br><span class="line">$ docker rmi -f fd484f19954f</span><br><span class="line"></span><br><span class="line">Untagged: test1:latest</span><br><span class="line">Untagged: test:latest</span><br><span class="line">Untagged: test2:latest</span><br><span class="line">Deleted: fd484f19954f4920da7ff372b5067f5b7ddb2fd3830cecd17b96ea9e286ba5b8</span><br></pre></td></tr></table></figure>

<h2 id="Container"><a href="#Container" class="headerlink" title="Container"></a>Container</h2><p>关于容器最主要的几个命令有run、cp、exec、log、rm、diff、start/stop</p>
<h3 id="run"><a href="#run" class="headerlink" title="run"></a>run</h3><ul>
<li>作用：一是创建和启动一个新的容器，二是启动时通过加选项和参数在容器运行命令；</li>
<li>用法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure>


</li>
</ul>
<table>
<thead>
<tr>
<th>OPTIONS</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>–attach , -a</td>
<td>附加到STDIN，STDOUT或STDERR</td>
</tr>
<tr>
<td>–detach , -d</td>
<td>在后台运行容器并打印容器ID</td>
</tr>
<tr>
<td>–env , -e</td>
<td>设置环境变量</td>
</tr>
<tr>
<td>–hostname , -h</td>
<td>容器主机名</td>
</tr>
<tr>
<td>–name</td>
<td>给你容器起个名字，以后可以使用这个名字启动或者停止容器</td>
</tr>
<tr>
<td>–interactive , -i</td>
<td>即使未连接STDIN也保持打开状态</td>
</tr>
<tr>
<td>–tty , -t</td>
<td>分配伪TTY</td>
</tr>
<tr>
<td>–volume , -v</td>
<td>绑定挂载卷</td>
</tr>
<tr>
<td>–publish , -p</td>
<td>将容器的端口映射到主机</td>
</tr>
<tr>
<td>–privileged</td>
<td>赋予此容器扩展的特权</td>
</tr>
<tr>
<td>–rm</td>
<td>退出时自动删除容器</td>
</tr>
<tr>
<td>–user , -u</td>
<td>用户名或UID</td>
</tr>
</tbody></table>
<p>扩展说明:<br>run是创建和启动容器的核心命令，参数较多，我在此只列举了常用的参数。</p>
<p>docker run命令首先creates是在指定镜像上的可写容器层，然后starts使用指定命令。也就是说， docker run相当于API /containers/create，然后 /containers/(id)/start。</p>
<p>如果要重新启动已停止的容器，使其之前的所有更改保持不变应该用docker start 而不是用run。</p>
<p>举几个例子：</p>
<ul>
<li>名称并分配伪TTY(-t)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --name test -it debian</span><br><span class="line"></span><br><span class="line">root@d6c0fe130dba:&#x2F;# exit 13</span><br><span class="line">$ echo $?</span><br><span class="line">13</span><br><span class="line">$ docker ps -a | grep test</span><br><span class="line">d6c0fe130dba        debian:7            &quot;&#x2F;bin&#x2F;bash&quot;         26 seconds ago      Exited (13) 17 seconds ago                         test</span><br></pre></td></tr></table></figure>
<p>本示例运行一个test使用debian:latest 镜像命名的容器。-it指示docker分配一个伪TTY连接到所述容器的stdin; bash在容器中创建一个交互式外壳。在该示例中，bash通过输入退出外壳程序 exit 13。此退出代码将传递给的调用者 docker run，并记录在test容器的元数据中。</p>
<ul>
<li>完整的容器功能（特权）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -t -i --rm ubuntu bash</span><br><span class="line">root@bc338942ef20:&#x2F;# mount -t tmpfs none &#x2F;mnt</span><br><span class="line">mount: permission denied</span><br></pre></td></tr></table></figure>
<p>在默认情况下，最有潜在危险的内核能力下降;包括cap_sys_admin（挂载文件系统所需）。但是，该–privileged标志将允许它运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -t -i --privileged ubuntu bash</span><br><span class="line">root@50e3f57e16e6:&#x2F;# mount -t tmpfs none &#x2F;mnt</span><br><span class="line">root@50e3f57e16e6:&#x2F;# df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">none            1.9G     0  1.9G   0% &#x2F;mnt</span><br></pre></td></tr></table></figure>
<p>该–privileged标志为容器提供了所有功能，并且还device解除了cgroup控制器强制执行的所有限制。换句话说，容器可以完成主机可以做的几乎所有事情。存在此标志是为了允许特殊用例，例如在Docker中运行Docker。</p>
<ul>
<li>映射或暴露端口（-p，-expose）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --name nginx -p 8888:80&#x2F;tcp -it -d nginx</span><br></pre></td></tr></table></figure>
<p>这会将nignx容器的80端口绑定到主机8888上0.0.0.0的TCP端口。我们还可以指定udp和sctp端口。<a href="https://docs.docker.com/network/links/" target="_blank" rel="noopener">《Docker用户指南》</a> 详细解释了如何在Docker中操作端口。</p>
<ul>
<li>设置环境变量（-e，-env，-env文件）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -e MYVAR1 --env MYVAR2&#x3D;foo --env-file .&#x2F;env.list ubuntu bash</span><br></pre></td></tr></table></figure>
<p>使用-e，–env和–env-file用在运行的容器中设置简单（非数组）环境变量，或覆盖正在运行的映像的Dockerfile中定义的变量。</p>
<p>可以使用导出到本地环境的变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export VAR1&#x3D;value1</span><br><span class="line">export VAR2&#x3D;value2</span><br><span class="line"></span><br><span class="line">$ docker run --env VAR1 --env VAR2 ubuntu env | grep VAR</span><br><span class="line">VAR1&#x3D;value1</span><br><span class="line">VAR2&#x3D;value2</span><br></pre></td></tr></table></figure>

<ul>
<li>给容器挂载存储卷（-v path:path),将本地的目录挂载到容器里，当绑定安装的卷的主机目录不存在时，Docker将为自动在主机上创建此目录。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -u root -d --name jenkins -p 8080:8080 -v &#x2F;data&#x2F;jenkins:&#x2F;data&#x2F;jenkins -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock    jenkinsci&#x2F;jenkins:lts ;</span><br></pre></td></tr></table></figure>
<p>通过绑定安装docker unix套接字和静态链接的docker二进制文件，可以为容器提供创建和操作主机的Docker守护程序的完全访问权限。</p>
<h3 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h3><ul>
<li>作用：在容器和本地文件系统之间复制文件/文件夹</li>
<li>用法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-</span><br><span class="line">docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH</span><br></pre></td></tr></table></figure>

</li>
</ul>
<table>
<thead>
<tr>
<th>OPTIONS</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>–archive , -a</td>
<td>将所有权设置为文件源的用户和主要组</td>
</tr>
<tr>
<td>–follow-link , -L</td>
<td>始终遵循SRC_PATH中的符号链接</td>
</tr>
<tr>
<td>- 扩展说明</td>
<td></td>
</tr>
</tbody></table>
<p>cp命令的行为类似于Unix cp -a命令，因为如果可能，将以递归方式复制目录并保留权限。所有权设置为目的地的用户和主要组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">假设使用路径分隔符&#x2F;的第一个参数SRC_PATH和的第二个参数DEST_PATH，其行为如下：</span><br><span class="line"></span><br><span class="line">SRC_PATH 指定一个文件</span><br><span class="line">        DEST_PATH 不存在</span><br><span class="line">            该文件将保存到在以下位置创建的文件中 DEST_PATH</span><br><span class="line">        DEST_PATH 不存在并以 &#x2F;</span><br><span class="line">            错误条件：目标目录必须存在。</span><br><span class="line">        DEST_PATH 存在并且是一个文件</span><br><span class="line">            目标被源文件的内容覆盖</span><br><span class="line">        DEST_PATH 存在并且是目录</span><br><span class="line">            使用以下文件中的基本名称将文件复制到此目录中： SRC_PATH</span><br><span class="line">SRC_PATH 指定目录</span><br><span class="line">        DEST_PATH 不存在</span><br><span class="line">            DEST_PATH被创建为目录，并将源目录的内容复制到该目录中</span><br><span class="line">        DEST_PATH 存在并且是一个文件</span><br><span class="line">            错误条件：无法将目录复制到文件</span><br><span class="line">        DEST_PATH 存在并且是目录</span><br><span class="line">            SRC_PATH不以&#x2F;. 结尾</span><br><span class="line">                源目录复制到该目录</span><br><span class="line">            SRC_PATH以&#x2F;.  结尾</span><br><span class="line">                源目录的内容被复制到该目录中</span><br></pre></td></tr></table></figure>
<p>根据上述规则，该命令要求SRC_PATH和DEST_PATH存在。如果SRC_PATH是本地的并且是符号链接，则默认情况下将复制符号链接而不是目标链接。要复制链接目标而不是链接，请指定-L选项。</p>
<ul>
<li>eg：  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">从容器里面拷文件到宿主机</span><br><span class="line">docker cp -a project:&#x2F;opt&#x2F;abc.txt &#x2F;home&#x2F;</span><br><span class="line">从宿主机拷文件到容器里面</span><br><span class="line">docker cp &#x2F;home&#x2F;abc.txt project:&#x2F;opt&#x2F;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h3><ul>
<li><p>作用：在正在运行的容器中运行命令</p>
</li>
<li><p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</span><br></pre></td></tr></table></figure>
<p>exec命令的参数和run命令的参数很多类似<br>OPTIONS | 描述</p>
</li>
<li><p>–|—</p>
</li>
<li><p>-detach , -d         |  分离模式：在后台运行命令</p>
</li>
<li><p>-env , -e |设置环境变量</p>
</li>
<li><p>-interactive , -i|即使未连接STDIN也保持打开状态</p>
</li>
<li><p>-privileged|赋予命令扩展权限</p>
</li>
<li><p>-tty , -t|    分配伪TTY</p>
</li>
<li><p>-user , -u|用户名或UID</p>
</li>
<li><p>-workdir , -w|容器内的工作目录</p>
</li>
<li><p>扩展说明</p>
</li>
</ul>
<p>使用docker exec容器启动的命令仅在容器的主进程（PID 1）正在运行时运行，如果重新启动容器，则该命令不会重新启动。</p>
<p>COMMAND将在容器的默认目录中运行。如果基础映像在其Dockerfile中具有使用WORKDIR指令指定的自定义目录，则将使用该目录。</p>
<p>举几个例子：</p>
<ul>
<li><p>bash在容器上执行一个交互式shell</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it nginx  bash</span><br></pre></td></tr></table></figure>
</li>
<li><p>在当前bash会话中设置环境变量</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it -e VAR&#x3D;1 nginx bash</span><br></pre></td></tr></table></figure>
<p>这将在nginx容器中创建一个新的Bash会话，且它的环境变量$VAR设置为“1”。请注意，此环境变量仅在当前Bash会话上有效。</p>
<ul>
<li>命令在创建容器时在相同的工作目录中运行。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker exec -it ubuntu_bash pwd</span><br><span class="line">&#x2F;</span><br><span class="line">$ docker exec -it -w &#x2F;root ubuntu_bash pwd</span><br><span class="line">&#x2F;root</span><br></pre></td></tr></table></figure>

<h3 id="log"><a href="#log" class="headerlink" title="log"></a>log</h3><ul>
<li><p>作用：提取容器的日志</p>
</li>
<li><p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs [OPTIONS] CONTAINER</span><br></pre></td></tr></table></figure>
<p>OPTIONS | 描述</p>
</li>
<li><p>–|—</p>
</li>
<li><p>-details         |  显示提供给日志的其他详细信息</p>
</li>
<li><p>-follow , -f |跟踪日志输出</p>
</li>
<li><p>-since|显示自时间戳记以来的日志或相对时间</p>
</li>
<li><p>-tail    |赋予命令扩展权限</p>
</li>
<li><p>-timestamps , -t|    显示时间戳</p>
</li>
<li><p>-until|在时间戳或相对时间之前显示日志</p>
</li>
<li><p>eg：</p>
</li>
</ul>
<p>为了在特定时间点之前检索日志，请运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --name test -d busybox sh -c &quot;while true; do $(echo date); sleep 1; done&quot;</span><br><span class="line">$ date</span><br><span class="line">Tue 14 Nov 2017 16:40:00 CET</span><br><span class="line">$ docker logs -f --until&#x3D;2s</span><br><span class="line">Tue 14 Nov 2017 16:40:00 CET</span><br><span class="line">Tue 14 Nov 2017 16:40:01 CET</span><br><span class="line">Tue 14 Nov 2017 16:40:02 CET</span><br></pre></td></tr></table></figure>

<p>查看指定时间后的日志，只显示最后100行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs -f -t --since&#x3D;&quot;2018-02-08&quot; --tail&#x3D;100 CONTAINER_ID</span><br></pre></td></tr></table></figure>

<p>查看最近30分钟的日志:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs --since 30m CONTAINER_ID</span><br></pre></td></tr></table></figure>
<p>查看某时间之后的日志：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs -t --since&#x3D;&quot;2018-02-08T13:23:37&quot; CONTAINER_ID</span><br></pre></td></tr></table></figure>
<p>查看某时间段日志：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs -t --since&#x3D;&quot;2018-02-08T13:23:37&quot; --until &quot;2018-02-09T12:23:37&quot; CONTAINER_ID</span><br></pre></td></tr></table></figure>



<h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h3><ul>
<li>作用：删除一个或多个容器</li>
<li>用法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>
OPTIONS | 描述</li>
<li>–|—</li>
<li>-force , -f |      强制删除正在运行的容器</li>
<li>-link , -l |删除指定的链接</li>
<li>-volumes , -v|    删除与容器关联的匿名卷</li>
</ul>
<p>举几个例子：</p>
<ul>
<li>强制删除运行中的容器</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker rm --force redis</span><br><span class="line">redis</span><br></pre></td></tr></table></figure>

<ul>
<li>删除所有停止的容器</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker rm $(docker ps -a -q)</span><br></pre></td></tr></table></figure>

<p>此命令删除所有停止的容器。docker ps -a -q上面的命令 返回所有现有的容器ID，并将其传递给rm删除它们的命令。正在运行的容器不会被删除。</p>
<ul>
<li>删除容器及匿名卷</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker rm -v redis</span><br><span class="line">redis</span><br></pre></td></tr></table></figure>
<p>该命令将删除容器及其关联的任何卷。请注意，如果使用名称指定了卷，则不会将其删除。</p>
<ul>
<li>删除容器，并且选择性地去除卷<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker create -v awesome:&#x2F;foo -v &#x2F;bar --name hello redis</span><br><span class="line">hello</span><br><span class="line">$ docker rm -v hello</span><br></pre></td></tr></table></figure>
在此示例中，存储卷/foo保持不变，但是的匿名卷/bar被移除。</li>
</ul>
<h3 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h3><ul>
<li><p>作用：检查容器文件系统上文件或目录的更改</p>
</li>
<li><p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker diff CONTAINER</span><br></pre></td></tr></table></figure>
</li>
<li><p>eg:</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker diff nginx</span><br><span class="line">C &#x2F;root</span><br><span class="line">A &#x2F;root&#x2F;.bash_history</span><br><span class="line">C &#x2F;run</span><br><span class="line">A &#x2F;run&#x2F;nginx.pid</span><br><span class="line">C &#x2F;var</span><br><span class="line">C &#x2F;var&#x2F;cache</span><br><span class="line">C &#x2F;var&#x2F;cache&#x2F;nginx</span><br><span class="line">A &#x2F;var&#x2F;cache&#x2F;nginx&#x2F;proxy_temp</span><br><span class="line">A &#x2F;var&#x2F;cache&#x2F;nginx&#x2F;scgi_temp</span><br><span class="line">A &#x2F;var&#x2F;cache&#x2F;nginx&#x2F;uwsgi_temp</span><br><span class="line">A &#x2F;var&#x2F;cache&#x2F;nginx&#x2F;client_temp</span><br><span class="line">A &#x2F;var&#x2F;cache&#x2F;nginx&#x2F;fastcgi_temp</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>符号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>添加了文件或目录</td>
</tr>
<tr>
<td>D</td>
<td>文件或目录已删除</td>
</tr>
<tr>
<td>C</td>
<td>文件或目录已更改</td>
</tr>
</tbody></table>
<h3 id="stop"><a href="#stop" class="headerlink" title="stop"></a>stop</h3><ul>
<li>作用：停止一个或多个运行中的容器</li>
<li>用法：docker stop [OPTIONS] CONTAINER [CONTAINER…]</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>–time , -t</td>
<td>等待杀死的秒数，然后将其杀死</td>
</tr>
<tr>
<td>- eg：</td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker stop  nginx</span><br></pre></td></tr></table></figure>

<h3 id="start"><a href="#start" class="headerlink" title="start"></a>start</h3><ul>
<li>作用：启动一个或多个已停止的容器</li>
<li>用法：docker start  CONTAINER [CONTAINER…]</li>
<li>eg：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker start  nginx</span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="volume"><a href="#volume" class="headerlink" title="volume"></a>volume</h3><ul>
<li>作用：存储卷管理</li>
</ul>
<p>举几个常用的例子：</p>
<ul>
<li>新建存储卷</li>
</ul>
<p>docker volume create  [OPTIONS] [VOLUME]</p>
<table>
<thead>
<tr>
<th>OPTIONS</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>–driver , -d 默认    local</td>
<td>指定卷驱动程序名称</td>
</tr>
<tr>
<td>–label</td>
<td>设置卷的元数据</td>
</tr>
<tr>
<td>–name</td>
<td>指定卷名</td>
</tr>
<tr>
<td>–opt , -o</td>
<td>设置驱动程序特定选项</td>
</tr>
<tr>
<td><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">创建一个卷,并启动一个容器引用该存储卷</span><br><span class="line">$ docker volume create hello</span><br><span class="line">hello</span><br><span class="line">docker run -itd  --name mysql -p 3306:3306  --privileged&#x3D;true  -v hello:&#x2F;var&#x2F;lib&#x2F;mysql -e MYSQL_ROOT_PASSWORD&#x3D;123456  mysql</span><br><span class="line"></span><br><span class="line">创建一个tmpfs名为foo 大小为100MB和uid1000的卷。</span><br><span class="line">$ docker volume create --driver local \</span><br><span class="line">    --opt type&#x3D;tmpfs \</span><br><span class="line">    --opt device&#x3D;tmpfs \</span><br><span class="line">    --opt o&#x3D;size&#x3D;100m,uid&#x3D;1000 \</span><br><span class="line">    foo</span><br><span class="line"></span><br><span class="line">从nfs中挂载&#x2F;path&#x2F;to&#x2F;dirin rw模式 192.168.1.1：</span><br><span class="line">$ docker volume create --driver local \</span><br><span class="line">    --opt type&#x3D;nfs \</span><br><span class="line">    --opt o&#x3D;addr&#x3D;192.168.1.1,rw \</span><br><span class="line">    --opt device&#x3D;:&#x2F;path&#x2F;to&#x2F;dir \</span><br><span class="line">    foo</span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>列出卷清单</li>
</ul>
<p>docker volume ls [OPTIONS]<br>OPTIONS | 描述<br>—|—<br>–filter , -f|      提供过滤器值（例如’dangling = true’）<br>–format |    使用Go模板打印漂亮的卷<br>–quiet , -q|    仅显示卷名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker volume ls</span><br><span class="line"></span><br><span class="line">DRIVER              VOLUME NAME</span><br><span class="line">local               rosemary</span><br><span class="line">local               tyler</span><br></pre></td></tr></table></figure>

<ul>
<li>删除所有未使用的本地卷</li>
</ul>
<p>docker volume prune [OPTIONS]<br>OPTIONS | 描述<br>—|—<br>–filter |      提供过滤器值（例如’label =’）<br>–force , -f |        不提示确认</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ docker volume prune</span><br><span class="line"></span><br><span class="line">WARNING! This will remove all local volumes not used by at least one container.</span><br><span class="line">Are you sure you want to continue? [y&#x2F;N] y</span><br><span class="line">Deleted Volumes:</span><br><span class="line">07c7bdf3e34ab76d921894c2b834f073721fccfbbcba792aa7648e3a7a664c2e</span><br><span class="line">my-named-vol</span><br><span class="line"></span><br><span class="line">Total reclaimed space: 36 B</span><br></pre></td></tr></table></figure>

<h3 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h3><ul>
<li>作用：列出容器</li>
<li>用法：docker ps [OPTIONS]</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>–all , -a</td>
<td>显示所有容器（默认显示为正在运行）</td>
</tr>
<tr>
<td>–filter , -f</td>
<td>根据提供的条件过滤输出</td>
</tr>
<tr>
<td>–format</td>
<td>使用Go模板打印漂亮的容器</td>
</tr>
<tr>
<td>–last , -n</td>
<td>显示n个最后创建的容器（包括所有状态）</td>
</tr>
<tr>
<td>–latest , -l</td>
<td>显示最新创建的容器（包括所有状态）</td>
</tr>
<tr>
<td>–quiet , -q</td>
<td>仅显示数字ID</td>
</tr>
<tr>
<td>–size , -s</td>
<td>显示文件总大小</td>
</tr>
</tbody></table>
<ul>
<li>eg：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS              PORTS                               NAMES</span><br><span class="line">55a00a8af099        nginx                 &quot;nginx -g &#39;daemon of…&quot;   4 hours ago         Up 8 minutes        80&#x2F;tcp                              nginx</span><br><span class="line">1c12274de353        jenkinsci&#x2F;blueocean   &quot;&#x2F;sbin&#x2F;tini -- &#x2F;usr&#x2F;…&quot;   6 days ago          Up 6 days           0.0.0.0:8080-&gt;8080&#x2F;tcp, 50000&#x2F;tcp   jenkins</span><br></pre></td></tr></table></figure>

<h3 id="images"><a href="#images" class="headerlink" title="images"></a>images</h3><ul>
<li>作用：列出镜像</li>
<li>用法：docker images [OPTIONS] [REPOSITORY[:TAG]]</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>–all , -a</td>
<td>显示所有镜像（默认隐藏中间镜像）</td>
</tr>
<tr>
<td>–filter , -f</td>
<td>根据提供的条件过滤输出</td>
</tr>
<tr>
<td>–format</td>
<td>使用Go模板打印漂亮的容器</td>
</tr>
<tr>
<td>–digests</td>
<td>显示摘要</td>
</tr>
<tr>
<td>–quiet , -q</td>
<td>仅显示数字ID</td>
</tr>
</tbody></table>
<ul>
<li>eg：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ docker images java</span><br><span class="line"></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">java                8                   308e519aac60        6 days ago          824.5 MB</span><br><span class="line">java                7                   493d82594c15        3 months ago        656.3 MB</span><br><span class="line">java                latest              2711b1d6f3aa        5 months ago        603.9 MB</span><br></pre></td></tr></table></figure>

<h3 id="system"><a href="#system" class="headerlink" title="system"></a>system</h3><ul>
<li>作用：管理Docker</li>
<li>用法：docker system COMMAND</li>
</ul>
<p>举几个常用的例子：</p>
<ul>
<li>显示Docker磁盘使用情况</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker system df -v</span><br><span class="line">Images space usage:</span><br><span class="line"></span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE                SHARED SIZE         UNIQUE SIZE         CONTAINERS</span><br><span class="line">jenkinsci&#x2F;blueocean   latest              b13e019d0f69        7 days ago          567.7MB             0B                  567.7MB             1</span><br><span class="line">nginx                 latest              9beeba249f3e        9 days ago          126.8MB             0B                  126.8MB             1</span><br><span class="line"></span><br><span class="line">Containers space usage:</span><br><span class="line"></span><br><span class="line">CONTAINER ID        IMAGE                 COMMAND                  LOCAL VOLUMES       SIZE                CREATED             STATUS              NAMES</span><br><span class="line">55a00a8af099        nginx                 &quot;nginx -g &#39;daemon of…&quot;   0                   47B                 4 hours ago         Up 12 minutes       nginx</span><br><span class="line">1c12274de353        jenkinsci&#x2F;blueocean   &quot;&#x2F;sbin&#x2F;tini -- &#x2F;usr&#x2F;…&quot;   2                   14.3MB              6 days ago          Up 6 days           jenkins</span><br><span class="line"></span><br><span class="line">Local Volumes space usage:</span><br><span class="line"></span><br><span class="line">VOLUME NAME                                                        LINKS               SIZE</span><br><span class="line">jenkins-data                                                       1                   0B</span><br><span class="line">3159d2edffe4e610a309e94edda2932296de1e2c73f0c48b9d6327c39f73580b   1                   340.1MB</span><br><span class="line"></span><br><span class="line">Build cache usage: 0B</span><br><span class="line"></span><br><span class="line">CACHE ID            CACHE TYPE          SIZE                CREATED             LAST USED           USAGE               SHARED</span><br><span class="line"></span><br><span class="line">#SHARED SIZE 是图像与另一图像共享的空间量（即它们的公共数据）</span><br><span class="line">#UNIQUE SIZE 是仅给定图像使用的空间量</span><br><span class="line">#SIZE是图像的虚拟大小，它是的总和SHARED SIZE与UNIQUE SIZE</span><br><span class="line">#未显示网络信息，因为它不占用磁盘空间。</span><br></pre></td></tr></table></figure>

<ul>
<li>显示系统范围的信息<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker system info</span><br><span class="line">Client:</span><br><span class="line"> Debug Mode: false</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Containers: 2</span><br><span class="line">  Running: 2</span><br><span class="line">  Paused: 0</span><br><span class="line">  Stopped: 0</span><br><span class="line"> Images: 2</span><br><span class="line"> Server Version: 19.03.4</span><br><span class="line"> Storage Driver: overlay2</span><br><span class="line">  Backing Filesystem: xfs</span><br><span class="line">  Supports d_type: true</span><br><span class="line">  Native Overlay Diff: true</span><br><span class="line"> Logging Driver: json-file</span><br><span class="line"> Cgroup Driver: cgroupfs</span><br><span class="line"> Plugins:</span><br><span class="line">  Volume: local</span><br><span class="line">  Network: bridge host ipvlan macvlan null overlay</span><br><span class="line">  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog</span><br><span class="line"> Swarm: inactive</span><br><span class="line"> Runtimes: runc</span><br><span class="line"> Default Runtime: runc</span><br><span class="line"> Init Binary: docker-init</span><br><span class="line"> containerd version: b34a5c8af56e510852c35414db4c1f4fa6172339</span><br><span class="line"> runc version: 3e425f80a8c931f88e6d94a8c831b9d5aa481657</span><br><span class="line"> init version: fec3683</span><br><span class="line"> Security Options:</span><br><span class="line">  seccomp</span><br><span class="line">   Profile: default</span><br><span class="line"> Kernel Version: 5.3.11-1.el7.elrepo.x86_64</span><br><span class="line"> Operating System: CentOS Linux 7 (Core)</span><br><span class="line"> OSType: linux</span><br><span class="line"> Architecture: x86_64</span><br><span class="line"> CPUs: 8</span><br><span class="line"> Total Memory: 15.61GiB</span><br><span class="line"> Name: localhost.localdomain</span><br><span class="line"> ID: 6GIS:LCQT:PWIR:OT3H:P7FV:FJWL:KQIT:6DR3:ENQC:HIRQ:4NV2:D7OL</span><br><span class="line"> Docker Root Dir: &#x2F;var&#x2F;lib&#x2F;docker</span><br><span class="line"> Debug Mode: false</span><br><span class="line"> Registry: https:&#x2F;&#x2F;index.docker.io&#x2F;v1&#x2F;</span><br><span class="line"> Labels:</span><br><span class="line"> Experimental: false</span><br><span class="line"> Insecure Registries:</span><br><span class="line">  127.0.0.0&#x2F;8</span><br><span class="line"> Registry Mirrors:</span><br><span class="line">  https:&#x2F;&#x2F;1nj0zren.mirror.aliyuncs.com&#x2F;</span><br><span class="line">  https:&#x2F;&#x2F;docker.mirrors.ustc.edu.cn&#x2F;</span><br><span class="line">  http:&#x2F;&#x2F;f1361db2.m.daocloud.io&#x2F;</span><br><span class="line">  https:&#x2F;&#x2F;registry.docker-cn.com&#x2F;</span><br><span class="line"> Live Restore Enabled: false</span><br><span class="line"></span><br><span class="line">WARNING: bridge-nf-call-iptables is disabled</span><br><span class="line">WARNING: bridge-nf-call-ip6tables is disabled</span><br></pre></td></tr></table></figure></li>
<li>删除未使用的数据（一般磁盘空间不够需要执行这个命令来清理）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker system prune [OPTIONS]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>–all , -a</td>
<td>删除所有未使用的镜像，而不仅仅是悬空的镜像</td>
</tr>
<tr>
<td>–force , -f</td>
<td>不提示确认</td>
</tr>
<tr>
<td>–volumes</td>
<td>删除卷</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ docker system prune -a</span><br><span class="line"></span><br><span class="line">WARNING! This will remove:</span><br><span class="line">        - all stopped containers</span><br><span class="line">        - all networks not used by at least one container</span><br><span class="line">        - all dangling images</span><br><span class="line">        - all build cache</span><br><span class="line">Are you sure you want to continue? [y&#x2F;N] y</span><br><span class="line"></span><br><span class="line">Deleted Containers:</span><br><span class="line">f44f9b81948b3919590d5f79a680d8378f1139b41952e219830a33027c80c867</span><br><span class="line">792776e68ac9d75bce4092bc1b5cc17b779bc926ab04f4185aec9bf1c0d4641f</span><br><span class="line"></span><br><span class="line">Deleted Networks:</span><br><span class="line">network1</span><br><span class="line">network2</span><br><span class="line"></span><br><span class="line">Deleted Images:</span><br><span class="line">untagged: hello-world@sha256:f3b3b28a45160805bb16542c9531888519430e9e6d6ffc09d72261b0d26ff74f</span><br><span class="line">deleted: sha256:1815c82652c03bfd8644afda26fb184f2ed891d921b20a0703b46768f9755c57</span><br><span class="line">deleted: sha256:45761469c965421a92a69cc50e92c01e0cfa94fe026cdd1233445ea00e96289a</span><br><span class="line"></span><br><span class="line">Total reclaimed space: 1.84kB</span><br></pre></td></tr></table></figure>

<h3 id="inspect"><a href="#inspect" class="headerlink" title="inspect"></a>inspect</h3><ul>
<li>作用：返回有关Docker对象的信息</li>
<li>用法：docker inspect [OPTIONS] NAME|ID [NAME|ID…]</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>–format, -f</td>
<td>使用Go模板打印漂亮的容器</td>
</tr>
<tr>
<td>–size , -s</td>
<td>如果类型为容器，则显示文件总大小</td>
</tr>
<tr>
<td>–type</td>
<td>返回指定类型的JSON</td>
</tr>
</tbody></table>
<ul>
<li>eg：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">获得容器的基本信息</span><br><span class="line"></span><br><span class="line">docker inspect nginx</span><br><span class="line"></span><br><span class="line">获取实例的IP地址</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# docker inspect --format&#x3D;&#39;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&#39; nginx</span><br><span class="line">172.17.0.3</span><br><span class="line"></span><br><span class="line">获取实例的MAC地址</span><br><span class="line"></span><br><span class="line">[root@localhost ~]#  docker inspect --format&#x3D;&#39;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.MacAddress&#125;&#125;&#123;&#123;end&#125;&#125;&#39; nginx</span><br><span class="line">02:42:ac:11:00:03</span><br><span class="line"></span><br><span class="line">获取实例的日志路径</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# docker inspect --format&#x3D;&#39;&#123;&#123;.LogPath&#125;&#125;&#39; nginx</span><br><span class="line">&#x2F;var&#x2F;lib&#x2F;docker&#x2F;containers&#x2F;55a00a8af09993ab9c69ee570d7cdf0fb90ac9d76579d9640137311962d9eaab&#x2F;55a00a8af09993ab9c69ee570d7cdf0fb90ac9d76579d9640137311962d9eaab-json.log</span><br><span class="line"></span><br><span class="line">获取实例的镜像名称</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# docker inspect --format&#x3D;&#39;&#123;&#123;.Config.Image&#125;&#125;&#39; nginx</span><br><span class="line">nginx</span><br><span class="line"></span><br><span class="line">列出所有端口绑定,可以遍历数组和结果中的映射以产生简单的文本输出：</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# docker inspect --format&#x3D;&#39;&#123;&#123;range $p, $conf :&#x3D; .NetworkSettings.Ports&#125;&#125; &#123;&#123;$p&#125;&#125; -&gt; &#123;&#123;(index $conf 0).HostPort&#125;&#125; &#123;&#123;end&#125;&#125;&#39; &#96;docker ps -a -q&#96;</span><br><span class="line"></span><br><span class="line">获取JSON格式的返回信息</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# docker inspect --format&#x3D;&#39;&#123;&#123;json .Config&#125;&#125;&#39; nginx</span><br><span class="line">&#123;&quot;Hostname&quot;:&quot;55a00a8af099&quot;,&quot;Domainname&quot;:&quot;&quot;,&quot;User&quot;:&quot;&quot;,&quot;AttachStdin&quot;:false,&quot;AttachStdout&quot;:false,&quot;AttachStderr&quot;:false,&quot;ExposedPorts&quot;:&#123;&quot;80&#x2F;tcp&quot;:&#123;&#125;&#125;,&quot;Tty&quot;:true,&quot;OpenStdin&quot;:true,&quot;StdinOnce&quot;:false,&quot;Env&quot;:[&quot;PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;sbin:&#x2F;usr&#x2F;local&#x2F;bin:&#x2F;usr&#x2F;sbin:&#x2F;usr&#x2F;bin:&#x2F;sbin:&#x2F;bin&quot;,&quot;NGINX_VERSION&#x3D;1.17.10&quot;,&quot;NJS_VERSION&#x3D;0.3.9&quot;,&quot;PKG_RELEASE&#x3D;1~buster&quot;],&quot;Cmd&quot;:[&quot;nginx&quot;,&quot;-g&quot;,&quot;daemon off;&quot;],&quot;Image&quot;:&quot;nginx&quot;,&quot;Volumes&quot;:null,&quot;WorkingDir&quot;:&quot;&quot;,&quot;Entrypoint&quot;:null,&quot;OnBuild&quot;:null,&quot;Labels&quot;:&#123;&quot;maintainer&quot;:&quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;&#125;,&quot;StopSignal&quot;:&quot;SIGTERM&quot;&#125;</span><br></pre></td></tr></table></figure>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>基本上常用的docker命令我都总结到这篇文章了，希望对大家有帮助，谢谢。</p>
<h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p><a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener">docker安装官方文档</a></p>
<p><a href="https://docs.docker.com/reference/" target="_blank" rel="noopener">dockercli官方文档</a></p>
<hr>
<p>版权声明：</p>
<p>原创不易，洗文可耻。除非注明，本博文章均为原创，转载请以链接形式标明本文地址。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Rugod</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://rugod.com/2020/06/09/docker/docker-idea-2/">https://rugod.com/2020/06/09/docker/docker-idea-2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://rugod.com" target="_blank">宇神之息</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a><a class="post-meta__tags" href="/tags/Devops/">Devops</a><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/%E5%AE%B9%E5%99%A8/">容器</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/Storage.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/wechat.JPG" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/alipay.JPG" alt="支付宝"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/06/17/kubernetes/Kubernetes-dashboard/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/kubernetes.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Kubernetes可视化界面及监控安装</div></div></a></div><div class="next-post pull_right"><a href="/2020/06/08/mysql/mysql-trx/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/mysql.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">跟我学Mysql之事务篇</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/06/29/docker/docker-idea-4/" title="深入浅出Docker原理及实战(四)——构建镜像"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/docker.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-history fa-fw" aria-hidden="true"></i> 2020-07-30</div><div class="relatedPosts_title">深入浅出Docker原理及实战(四)——构建镜像</div></div></a></div><div class="relatedPosts_item"><a href="/2020/06/27/docker/docker-idea-3/" title="深入浅出Docker原理及实战(三)——制作Dockerfile"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/docker.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-history fa-fw" aria-hidden="true"></i> 2020-07-30</div><div class="relatedPosts_title">深入浅出Docker原理及实战(三)——制作Dockerfile</div></div></a></div><div class="relatedPosts_item"><a href="/2020/05/24/docker/docker-idea-1/" title="深入浅出Docker原理及实战(一)——Docker的基本理念与原理"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/docker.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-history fa-fw" aria-hidden="true"></i> 2020-07-30</div><div class="relatedPosts_title">深入浅出Docker原理及实战(一)——Docker的基本理念与原理</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/gh/xaoxuu/volantis/js/volantis.min.js"></script><script>var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify: false,
  verify: false,
  appId: 'GkD8YSRxxCgXoW6LqFO3cKhd-gzGzoHsz',
  appKey: 'DbbNrHwsCuK9Ehh2wgOw6UXL',
  placeholder: '记得留下你的昵称和邮箱...可以快速收到回复哦',
  avatar: 'monsterid',
  meta: guest_info,
  pageSize: '10',
  lang: 'zh-cn',
  recordIP: false,
  serverURLs: ''
});</script></div></article></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/chenyu1st/chenyu-cdn@master/rugod.cn/Blog/docker.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By Rugod</div><div class="footer_custom_text">弱小的人才习惯嘲讽和否定，而内心强大的人从不吝啬赞美和鼓励</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="canvas_nest" color="255,0,0" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/ClickShowText.js"></script><script src="/js/search/local-search.js"></script></body></html>